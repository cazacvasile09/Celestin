name: Build APP

on: 
    push:
        branches: 
            - 'cicd'
jobs:
    build-and-push:
            runs-on: ubuntu-latest
            steps:
            - run: echo "Docker actions comes with git preinstalled, so we don't need checkout action anymore"

            # - uses: actions/checkout@v4

            - name: Set up QEMU
              uses: docker/setup-qemu-action@v3

            - name: Set up Docker Buildx
              uses: docker/setup-buildx-action@v3

            - name: Docker Login
              uses: docker/login-action@v3
              with:
                username: ${{ secrets.DOCKER_USER }}
                password: ${{ secrets.DOCKER_PASSWORD }}

            - name: Build and push
              uses: docker/build-push-action@v6
              with:
                push: true
                tags: practicaendvsv/builds:solution-${{ github.sha }}
                